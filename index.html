<html><head>
<script type="text/javascript">
    var midiAccess = null;
    var midiInputs = null;
    var midiOutputs = null;

    function printString(str) {
        var messagelog = document.getElementById('messagelog');
        messagelog.value += str + "\n";
    }

    function setup() {
window.navigator.requestMIDIAccess()
    .then(onMIDISuccess, onMIDIFailure);
    }
  
function onMIDISuccess(midiAccess) {
    printString("Successo");
    var inputs = [];
            var iter = midiAccess.inputs.values();
            for (var o = iter.next(); !o.done; o = iter.next()) {
                inputs.push(o.value);
            }

            for (var port = 0; port < inputs.length; port++) {

                inputs[port].onstatechange = function (event) {
                    var port = event.port;
                    printString("MIDIInputPort onstatechange name:" + port.name + " connection:" + port.connection + " state:" + port.state);
                };
            }

     var outputs = [];
            var iter = midiAccess.outputs.values();
            for (var o = iter.next(); !o.done; o = iter.next()) {
                outputs.push(o.value);
            }

            for (var port = 0; port < outputs.length; port++) {
                outputs[port].onstatechange = function (event) {
                    var port = event.port;
                    printString("MIDIOutputPort onstatechange name:" + port.name + " connection:" + port.connection + " state:" + port.state);
                };
            }

            midiInputs = inputs;
            midiOutputs = outputs;
}

function onMIDIFailure() {
    printString('Could not access your MIDI devices.');
}
   

    window.onload = function() {
        setup();
    }
</script>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
</head>
  <body>
<h1 class="title">MIDI log</h1>
<textarea id="messagelog">Testo qui
</textarea>
</body></html>
